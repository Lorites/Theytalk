<div class="posi fixed top lef rit">
    <i class="fa fa-comment it green" title="Chat"></i>
<a class="bold" (click)='open=true'>
  {{namee}}
</a>
</div>
<div *ngIf="open" class="page fixed index bottom top lef rit black" (click)="g()">
</div>
<div *ngIf="open" class="fixed index bottom" (click)="g()">
    <a href="/home/chat/{{friendId}}/{{name}}#bottom" class="design left bo dess download" title="Chat">
        <i class="fa fa-comment gree do"></i>            
    </a>
    <button class="box design des" title="Forum" routerLink="/home/forum/{{friendId}}/{{name}}">
        <i class="fa fa-mail-bulk"></i>            
    </button>
    <button class="box design des" title="Profile" routerLink="/home/profile/{{friendId}}/{{name}}">
        <i class="fa fa-user-tie"></i>            
    </button>
    <button class="box design des" title="Wall" routerLink="/home/wall/{{friendId}}/{{name}}">
        <i class="fa fa-user-secret"></i>            
    </button>
    <button class="box design des" title="Following parties' inbox" routerLink="/home/followingPartiesInbox/{{friendId}}/{{name}}">
        <i class="fa fa-envelope"></i>            
    </button>
    <button class="box design des" title="Following people' status" routerLink="/home/followingPeopleStatus/{{friendId}}/{{name}}">
        <i class="fa fa-tv"></i>            
    </button>
    <button class="box design des" routerLink="/home/friends/{{friendId}}/{{name}}" title="Friends">
        <i class="fa fa-user-friends"></i>        
    </button>
    <button class="box design des" title="Channels" routerLink="/home/channels/{{friendId}}/{{name}}">
        <i class="fa fa-warehouse"></i>            
    </button>
    <button class="box design des" title="Display picture" routerLink="/home/displayPicture/{{friendId}}/{{name}}">
        <i class="fa fa-portrait"></i>            
    </button>
    <button [disabled]="!userId" class="box design des" title="Follow" (click)="add()" >
        <i class="fa fa-user-plus"></i>            
    </button>
    <button [disabled]="!userId" class="box design des" title="Unfollow" (click)="remove()">
        <i class="fa fa-user-minus"></i>            
    </button>
    <button [disabled]="!userId" class="design box des" title="Clear chat" (click)="clear()">
        <i class="fa fa-trash-alt"></i>
    </button>
</div>

<div class="spacc space">
<div class="spac writ" *ngFor="let message of messages | async" [class.me]="message.userId === userId">
  <div class="write">
  {{message.text}}
  <div class="right it">{{message.time | date:"EEEE, MMMM d, y 'at' h:mm a"}}</div>
  <div class="clear"></div>
  <a [href]="message.url" download *ngIf="message.ext" class="design left bo dess download" title="Download file">
    <i class="fa fa-download gree do"></i>
  </a>
<div class="clear"></div>
  </div>
  <img *ngIf="message.ext === 'jpg' || message.ext === 'png' || message.ext === 'gif'" [src]="message.url">    
  <video *ngIf="message.ext === 'mp4'" controls>
    <source [src]="message.url" type="video/mp4">
</video>
<audio *ngIf="message.ext === 'mp3'" controls>
    <source [src]="message.url" type="audio/mp3">
</audio>
<i *ngIf="message.ext && message.ext !== 'mp3' && message.ext !== 'mp4' && message.ext !== 'jpg' && message.ext !== 'png' && message.ext !== 'gif'" class="fa fa-5x fa-file"></i>
</div>
<a id="bottom"></a> 
</div>
  <form class="down fixed bottom lef rit" (submit)="send(text)">
    <div class="d">
  <textarea id="te" [placeholder]="name" [(ngModel)]="text" name="text"></textarea>
  </div>
<label *ngIf="userId" class="file design dess bo" title="Upload file">
  <input type="file" class="no" (change)="upload($event)" >
  <i class="fa fa-upload gree"></i>
</label>
  <button type="submit" [disabled]="!text || !userId" class="full submit des" title="Create message">
    <i class="fa fa-reply"></i>
  </button>
  </form>
